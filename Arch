FROM archlinux:latest

#multilib
RUN echo "[multilib]" >> /etc/pacman.conf && \
    echo "Include = /etc/pacman.d/mirrorlist" >> /etc/pacman.conf

#update repositories and upgrade dependencies
RUN pacman -Syy --noconfirm
RUN pacman -Syu --noconfirm
RUN pacman -Sy --noconfirm bash \
                           bzip2 \
                           ca-certificates \
		           curl \
		           dirmngr \
		           dpkg \
		           findutils \
		           gcc \
		           git \
		           gnupg \
		           jq \
		           lib32-bzip2 \
		           lib32-glibc \
		           expat \
		           libffi \
		           libjpeg-turbo \
		           xz \
		           sqlite \
		           openssl \
		           libxml2 \
		           libxslt \
		           make \
		           musl \
		           neofetch \
		           netbase \
		           pv \
		           sudo \
		           tar \
		           wget \
		           xz-utils \
		           zip \
		           zlib
             
# Python & Pypi
RUN pacman -Sy python python-pip --noconfirm
RUN python -m pip install -U pip
RUN pip install wheel setuptools

#Fizilion
RUN pacman -Sy --noconfirm aria2 \
		                   chromium \
		                   expect \
                                   ffmpeg \
		                   figlet \
		                   freetype2 \
		                   libevent \             
		                   megatools \
                                   openssh \
                                   p7zip \
		                   postgresql \
		                   postgresql-libs

#requirments
ADD https://raw.githubusercontent.com/FrosT2k5/ProjectFizilion/dragon/requirements.txt requirements.txt	
RUN pip install --no-cache-dir -r requirements.txt	
RUN rm -rf requirements.txt

#finalization
CMD ["python3"]
